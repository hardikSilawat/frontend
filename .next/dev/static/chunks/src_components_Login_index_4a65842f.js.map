{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/TUF%20GAMING/OneDrive/Desktop/Interview%20Task/frontend/src/components/Login/index.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Cookies from \"js-cookie\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { setUser } from \"@/redux/reducers\";\r\nimport api from \"@/apiHandler/page\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  InputAdornment,\r\n  Link as MuiLink,\r\n  Button,\r\n  CircularProgress,\r\n  IconButton,\r\n  Fade,\r\n  useTheme,\r\n  useMediaQuery,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport {\r\n  LockOutlined,\r\n  EmailOutlined,\r\n  Visibility,\r\n  VisibilityOff,\r\n  AdminPanelSettings,\r\n  Person,\r\n} from \"@mui/icons-material\";\r\nimport Link from \"next/link\";\r\n\r\nconst LoginForm = ({ isAdmin = false, onSuccess, authModal = true }) => {\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const router = useRouter();\r\n  const dispatch = useDispatch();\r\n  const userToken = Cookies.get(\"UserToken\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword((prev) => !prev);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await api.post(\"/auth/login\", {\r\n        ...formData,\r\n        role: isAdmin ? \"admin\" : \"user\",\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        toast.success(response?.message || \"Login successful!\");\r\n        const tokenName = isAdmin ? \"AdminToken\" : \"UserToken\";\r\n\r\n        // In your handleSubmit function:\r\n        Cookies.set(tokenName, response?.data?.token, {\r\n          expires: 100 * 365,\r\n          path: \"/\",\r\n          secure: true,\r\n          sameSite: \"strict\",\r\n        });\r\n\r\n        dispatch(setUser(response.data.user));\r\n\r\n        const targetRoute = isAdmin ? \"/admin/dashboard\" : \"/dashboard\";\r\n        router.push(targetRoute);\r\n\r\n        onSuccess?.();\r\n        return { success: true, message: \"Login successful!\" };\r\n      } else {\r\n        const errorMessage =\r\n          response?.message || \"Login failed. Please try again.\";\r\n        toast.error(errorMessage);\r\n        return { success: false, message: errorMessage };\r\n      }\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err.response?.data?.message ||\r\n        err.message ||\r\n        \"An error occurred during login.\";\r\n      toast.error(errorMessage);\r\n      return { success: false, message: errorMessage };\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fade in={true} timeout={500}>\r\n      <Paper\r\n        elevation={6}\r\n        sx={{\r\n          p: isMobile ? 3 : 4,\r\n          width: \"100%\",\r\n          maxWidth: 450,\r\n          borderRadius: 2,\r\n          boxShadow: \"0 8px 32px rgba(0, 0, 0, 0.1)\",\r\n          background: \"rgba(255, 255, 255, 0.95)\",\r\n          backdropFilter: \"blur(10px)\",\r\n          border: \"1px solid rgba(255, 255, 255, 0.2)\",\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            mb: 4,\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              width: 60,\r\n              height: 60,\r\n              borderRadius: \"50%\",\r\n              backgroundColor: theme.palette.primary.light,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              mb: 2,\r\n            }}\r\n          >\r\n            {isAdmin ? (\r\n              <AdminPanelSettings sx={{ fontSize: 32, color: \"white\" }} />\r\n            ) : (\r\n              <Person sx={{ fontSize: 32, color: \"white\" }} />\r\n            )}\r\n          </Box>\r\n          <Typography component=\"h1\" variant=\"h5\" fontWeight=\"bold\">\r\n            {isAdmin ? \"Admin Portal\" : \"Welcome Back\"}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" mt={1}>\r\n            {isAdmin\r\n              ? \"Sign in to access the admin dashboard\"\r\n              : \"Sign in to continue\"}\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            disabled={isLoading}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <EmailOutlined color=\"action\" />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n            sx={{\r\n              mb: 2,\r\n              \"& .MuiOutlinedInput-root\": {\r\n                borderRadius: 1,\r\n                \"& fieldset\": {\r\n                  borderColor: \"divider\",\r\n                },\r\n                \"&:hover fieldset\": {\r\n                  borderColor: \"primary.main\",\r\n                },\r\n              },\r\n            }}\r\n          />\r\n\r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            disabled={isLoading}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <LockOutlined color=\"action\" />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={togglePasswordVisibility}\r\n                    edge=\"end\"\r\n                    size=\"small\"\r\n                    sx={{ color: \"text.secondary\" }}\r\n                  >\r\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n            sx={{\r\n              \"& .MuiOutlinedInput-root\": {\r\n                borderRadius: 1,\r\n                \"& fieldset\": {\r\n                  borderColor: \"divider\",\r\n                },\r\n                \"&:hover fieldset\": {\r\n                  borderColor: \"primary.main\",\r\n                },\r\n              },\r\n            }}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            disabled={isLoading}\r\n            size=\"large\"\r\n            sx={{\r\n              mt: 3,\r\n              mb: 2,\r\n              py: 1.5,\r\n              borderRadius: 1,\r\n              textTransform: \"none\",\r\n              fontSize: \"1rem\",\r\n              fontWeight: 600,\r\n              background: `linear-gradient(45deg, ${theme.palette.primary.main} 0%, ${theme.palette.primary.dark} 100%)`,\r\n              boxShadow:\r\n                \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\",\r\n              \"&:hover\": {\r\n                boxShadow:\r\n                  \"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)\",\r\n                transform: \"translateY(-1px)\",\r\n              },\r\n              \"&:active\": {\r\n                transform: \"translateY(0)\",\r\n              },\r\n            }}\r\n          >\r\n            {isLoading ? (\r\n              <CircularProgress size={24} color=\"inherit\" />\r\n            ) : (\r\n              `Sign In ${isAdmin ? \"as Admin\" : \"\"}`.trim()\r\n            )}\r\n          </Button>\r\n\r\n          <Box sx={{ mt: 3, textAlign: \"center\" }}>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              {isAdmin ? (\r\n                <>\r\n                  User ?{\" \"}\r\n                  <Typography\r\n                    component={Link}\r\n                    href=\"/login\"\r\n                    color=\"primary\"\r\n                    sx={{\r\n                      fontWeight: 600,\r\n                      textDecoration: \"none\",\r\n                      \"&:hover\": {\r\n                        textDecoration: \"underline\",\r\n                      },\r\n                    }}\r\n                  >\r\n                    Go to User Login\r\n                  </Typography>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Admin ?{\" \"}\r\n                  <Typography\r\n                    component={Link}\r\n                    href=\"/admin/login\"\r\n                    color=\"primary\"\r\n                    sx={{\r\n                      fontWeight: 600,\r\n                      textDecoration: \"none\",\r\n                      \"&:hover\": {\r\n                        textDecoration: \"underline\",\r\n                      },\r\n                    }}\r\n                  >\r\n                    Go to Admin Login\r\n                  </Typography>\r\n                </>\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Paper>\r\n    </Fade>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"names":[],"mappings":"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"}}]
}