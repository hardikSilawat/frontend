module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},43238,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(24089),e=a.i(19470),f=a.i(77940),g=a.i(10446),h=a.i(56705),i=a.i(74653),j=a.i(48385),k=a.i(68386),l=a.i(43672),m=a.i(7946),n=a.i(15937),o=a.i(8325),p=a.i(74288),q=a.i(90245),r=a.i(36697),s=a.i(35377),t=a.i(49081),u=a.i(89612),v=a.i(21226),w=a.i(6991),x=a.i(28473),y=a.i(20094),z=a.i(96191),A=a.i(59656);a.i(21248);var B=a.i(10098);function C(){let[a,C]=(0,c.useState)({subtopics:[],topics:[],loading:!0,page:0,rowsPerPage:10,totalRows:0,searchTerm:"",selectedTopic:"",difficulty:"",status:""}),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),{confirm:H}=(0,z.useConfirm)(),I=(0,c.useRef)(null),J=(0,c.useCallback)(async b=>{try{C(a=>({...a,loading:!0}));let c=new URLSearchParams({page:a.page+1,limit:a.rowsPerPage});a.searchTerm&&c.append("search",a.searchTerm),a.selectedTopic&&c.append("topic",a.selectedTopic),a.difficulty&&c.append("difficulty",a.difficulty),a.status&&c.append("status",a.status);let d=await x.api.get(`/subtopics?${c.toString()}`,{signal:b});if(d.success)C(a=>({...a,subtopics:d.data.subtopics||[],totalRows:d.data.pagination?.total||0,loading:!1}));else throw Error(d.message||"Failed to fetch subtopics")}catch(a){"AbortError"!==a.name&&(console.error("Error fetching subtopics:",a),C(b=>({...b,loading:!1,error:a.response?.data?.message||"Failed to fetch subtopics"})),y.toast.error(a.response?.data?.message||"Failed to fetch subtopics"))}},[a.page,a.rowsPerPage,a.searchTerm,a.selectedTopic,a.difficulty,a.status]);(0,c.useEffect)(()=>{I.current&&I.current.abort(),I.current=new AbortController;let a=setTimeout(()=>{J(I.current.signal)},300);return()=>{clearTimeout(a),I.current&&I.current.abort()}},[J]),(0,c.useEffect)(()=>{(async()=>{try{let a=await x.api.get("/topics?limit=1000");a.success&&C(b=>({...b,topics:a.data.topics||[]}))}catch(a){console.error("Error fetching topics:",a),y.toast.error("Failed to load topics")}})()},[]);let K=()=>{G(!1),E(null)},L=async a=>{try{await H({type:"error",title:"Delete Subtopic",message:`Are you sure you want to delete ${a.name}?`,confirmText:"Delete",details:[{label:"Difficulty",value:a.difficulty||"Not set"},{label:"Status",value:a.status||"pending"}],onConfirm:async()=>{try{let b=await x.api.delete(`/subtopics/${a._id}`);if(b.success)J(),y.toast.success("Subtopic deleted successfully");else throw Error(b.message||"Failed to delete subtopic")}catch(a){throw console.error("API Error:",a),a}}})}catch(a){"cancelled"!==a&&(console.error("Error in confirmation:",a),y.toast.error(a.response?.data?.message||"Failed to delete subtopic"))}},M=async a=>{let b=!!D,c=b?`/subtopics/${D._id}`:"/subtopics";try{let d={...a,topic:a.topicId,order:parseInt(a.order)||0},e=await x.api[b?"put":"post"](c,d);if(!e.success){let a=Array.isArray(e.message)?e.message.join(". "):e.message;throw Error(a)}y.toast.success(e.message||`Subtopic ${b?"updated":"created"} successfully`),J(),K()}catch(a){console.error(`Error ${b?"updating":"saving"} subtopic:`,a),y.toast.error(a.response?.data?.message||a.message||"An error occurred")}},N=[{field:"name",headerName:"Subtopic",minWidth:200,flex:1,render:a=>(0,b.jsx)(d.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,b.jsxs)(d.Box,{children:[(0,b.jsx)(e.Typography,{variant:"subtitle1",fontWeight:500,textTransform:"capitalize",children:a.name}),a.topic?.name&&(0,b.jsxs)(e.Typography,{variant:"caption",color:"text.secondary",children:["Topic: ",a.topic.name]})]})})},{field:"difficulty",headerName:"Difficulty",width:120,render:a=>{let c=a.difficulty?.toLowerCase()||"";return(0,b.jsx)(i.Chip,{label:c||"Not set",color:{easy:"success",medium:"warning",tough:"error"}[c]||"default",size:"small",variant:"outlined"})}},{field:"status",headerName:"Status",width:120,headerAlign:"center",align:"center",render:a=>{let c=a.status?.toLowerCase()||"pending",d={completed:{bg:"#4caf50",hover:"#388e3c"},pending:{bg:"#ff9800",hover:"#f57c00"}};return(0,b.jsx)(i.Chip,{label:c.charAt(0).toUpperCase()+c.slice(1),size:"small",variant:"filled",sx:{fontWeight:500,minWidth:100,color:"white",backgroundColor:d[c]?.bg||"default","&:hover":{backgroundColor:d[c]?.hover||"default"},"& .MuiChip-label":{px:1.5,py:.5}}})}},{field:"createdAt",headerName:"Created",width:150,render:a=>(0,b.jsxs)(d.Box,{children:[(0,b.jsx)(e.Typography,{variant:"body2",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"}),a.updatedAt&&(0,b.jsxs)(e.Typography,{variant:"caption",color:"text.secondary",children:["Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]})},{field:"actions",headerName:"Actions",width:120,align:"right",render:a=>(0,b.jsxs)(d.Box,{sx:{display:"flex",justifyContent:"flex-end",gap:1,pr:1},children:[(0,b.jsx)(o.Tooltip,{title:"Edit subtopic",children:(0,b.jsx)(n.IconButton,{size:"small",onClick:b=>{b.stopPropagation(),E({...a,topicId:a.topic?._id}),G(!0)},sx:{"&:hover":{backgroundColor:"action.hover",color:"primary.main"}},children:(0,b.jsx)(s.default,{fontSize:"small"})})}),(0,b.jsx)(o.Tooltip,{title:"Delete subtopic",children:(0,b.jsx)(n.IconButton,{size:"small",onClick:b=>{b.stopPropagation(),L(a)},sx:{"&:hover":{backgroundColor:"action.hover",color:"error.main"}},children:(0,b.jsx)(t.default,{fontSize:"small"})})})]})}];return(0,b.jsxs)(v.default,{children:[(0,b.jsxs)(d.Box,{sx:{p:3},children:[(0,b.jsxs)(d.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,background:`linear-gradient(45deg, ${A.default.palette.primary.main} 0%, ${A.default.palette.primary.dark} 100%)`,borderRadius:2,boxShadow:A.default.shadows[2],py:1.5,px:2,color:A.default.palette.common.white},children:[(0,b.jsxs)(e.Typography,{variant:"h4",component:"h1",sx:{fontWeight:500,textTransform:"uppercase",fontSize:24,letterSpacing:"0.09em",textShadow:"0 0 5px rgba(0, 0, 0, 0.1)"},children:["Subtopics (",a.totalRows||0,")"]}),(0,b.jsx)(f.Button,{variant:"contained",color:"primary",startIcon:(0,b.jsx)(q.default,{}),onClick:()=>{E(null),G(!0)},children:"Add Subtopic"})]}),(0,b.jsx)(m.Paper,{elevation:0,sx:{mb:3,p:2,borderRadius:2,border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:1}},children:(0,b.jsx)(g.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Search subtopics...",value:a.searchTerm,onChange:a=>{C(b=>({...b,searchTerm:a.target.value,page:0}))},disabled:a.loading,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"background.paper","&:hover fieldset":{borderColor:"primary.light"},"&.Mui-focused fieldset":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(25, 118, 210, 0.2)"}}},InputProps:{startAdornment:(0,b.jsx)(h.InputAdornment,{position:"start",children:(0,b.jsx)(r.default,{color:"action",sx:{color:"text.secondary",...a.loading&&{color:"primary.main"}}})}),endAdornment:a.loading&&(0,b.jsx)(h.InputAdornment,{position:"end",children:(0,b.jsx)(p.CircularProgress,{size:20,thickness:4})})},helperText:(0,b.jsx)(d.Box,{component:"span",sx:{display:"flex",alignItems:"center",color:a.searchTerm&&a.searchTerm.length<2?"text.secondary":"transparent",fontSize:"0.75rem",height:"1.2rem"},children:a.searchTerm&&a.searchTerm.length<2?"Type at least 2 characters to search":" "})})}),(0,b.jsx)(m.Paper,{sx:{position:"relative",minHeight:400},children:(0,b.jsx)(B.DataTable,{rows:a.subtopics,columns:N,loading:a.loading,page:a.page,rowsPerPage:a.rowsPerPage,totalRows:a.totalRows,onPageChange:(a,b)=>{C(a=>({...a,page:b}))},onRowsPerPageChange:a=>{C(b=>({...b,rowsPerPage:a,page:0}))},emptyMessage:"No subtopics found"})})]}),(0,b.jsxs)(j.Dialog,{open:F,onClose:K,maxWidth:"md",fullWidth:!0,children:[(0,b.jsxs)(k.DialogTitle,{sx:{m:0,p:2.5,background:`linear-gradient(195deg, ${A.default.palette.primary.main}, ${A.default.palette.primary.dark})`,color:"white",display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiTypography-root":{fontWeight:600,letterSpacing:"0.5px"}},children:[(0,b.jsxs)(d.Box,{children:[(0,b.jsxs)(e.Typography,{variant:"h5",fontWeight:"bold",children:[D?"Edit":"Add New"," Subtopic"]}),(0,b.jsx)(e.Typography,{variant:"caption",sx:{opacity:.8,display:"block",mt:.5},children:D?"Update the subtopic details":"Fill in the details to add a new subtopic"})]}),(0,b.jsx)(n.IconButton,{"aria-label":"close",onClick:K,sx:{position:"absolute",right:8,top:8,color:"common.white"},children:(0,b.jsx)(u.default,{})})]}),(0,b.jsx)(l.DialogContent,{dividers:!0,children:(0,b.jsx)(w.default,{fields:[{name:"topicId",label:"Topic",type:"select",options:a.topics.map(a=>({value:a._id,label:a.name})),required:!0,gridProps:{size:{xs:12,sm:12,md:6}}},{name:"name",label:"Subtopic Name",type:"text",required:!0,gridProps:{size:{xs:12,sm:12,md:6}}},{name:"description",label:"Description",type:"textarea",fullWidth:!0,gridProps:{size:{xs:12,sm:12,md:12}},multiline:!0,rows:3},{name:"difficulty",label:"Difficulty",type:"select",options:[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"tough",label:"Tough"}],required:!0,gridProps:{size:{xs:12,sm:6,md:4}}},{name:"status",label:"Status",type:"select",options:[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"}],required:!0,gridProps:{size:{xs:12,sm:6,md:4}}},{name:"order",label:"Order",type:"number",required:!0,inputProps:{min:0},gridProps:{size:{xs:12,sm:6,md:4}}},{name:"youtubeLink",label:"YouTube Link",type:"url",gridProps:{size:{xs:12,sm:6,md:4}}},{name:"leetcodeLink",label:"LeetCode Link",type:"url",gridProps:{size:{xs:12,sm:6,md:4}}},{name:"articleLink",label:"Article Link",type:"url",gridProps:{size:{xs:12,sm:6,md:4}}}],initialValues:D||{name:"",description:"",topicId:"",difficulty:"easy",status:"pending",order:0,youtubeLink:"",leetcodeLink:"",articleLink:""},onSubmit:M,onCancel:K,submitText:D?"Update Subtopic":"Add Subtopic",validationSchema:{name:[{test:a=>a&&a.trim().length>0,message:"Subtopic name is required"}],description:[{test:a=>a&&a.trim().length>0,message:"Description name is required"}],topicId:[{test:a=>!!a,message:"Please select a topic"}],difficulty:[{test:a=>["easy","medium","tough"].includes(a),message:"Please select a valid difficulty"}],order:[{test:a=>!isNaN(parseInt(a)),message:"Order must be a number"}]}})})]})]})}a.s(["default",()=>C])}];

//# sourceMappingURL=_f68fec17._.js.map