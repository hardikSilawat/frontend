module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},17110,a=>{"use strict";var b=a.i(96851);a.s(["Avatar",()=>b.default])},5636,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(24089),e=a.i(19470),f=a.i(77940),g=a.i(10446),h=a.i(56705),i=a.i(74653),j=a.i(17110),k=a.i(48385),l=a.i(68386),m=a.i(43672),n=a.i(15937),o=a.i(8325),p=a.i(74288),q=a.i(90245),r=a.i(36697),s=a.i(35377),t=a.i(49081),u=a.i(89612),v=a.i(6991);a.i(21248);var w=a.i(10098),x=a.i(21226),y=a.i(28473),z=a.i(20094),A=a.i(96191),B=a.i(59656);function C(){let[a,C]=(0,c.useState)({users:[],loading:!0,page:0,rowsPerPage:10,totalRows:0,searchTerm:""}),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),{confirm:H}=(0,A.useConfirm)(),I=(0,c.useRef)(null),J=(0,c.useCallback)(async b=>{try{C(a=>({...a,loading:!0}));let c=new URLSearchParams({page:a.page+1,limit:a.rowsPerPage});a.searchTerm&&c.append("search",a.searchTerm);let d=await y.api.get(`/auth/admin/users?${c.toString()}`,{signal:b});if(d.success)C(a=>({...a,users:d.data.users,totalRows:d.data.pagination.total,loading:!1}));else throw Error(d.message||"Failed to fetch users")}catch(a){"AbortError"!==a.name&&(console.error("Error fetching users:",a),C(b=>({...b,loading:!1,error:a.response?.data?.message||"Failed to fetch users"})),z.toast.error(a.response?.data?.message||"Failed to fetch users"))}},[a.page,a.rowsPerPage,a.searchTerm]);(0,c.useEffect)(()=>{I.current&&I.current.abort(),I.current=new AbortController;let b=!a.searchTerm||a.searchTerm.length>=2,c=setTimeout(()=>{(b||""===a.searchTerm)&&J(I.current.signal)},300);return()=>{clearTimeout(c),I.current&&I.current.abort()}},[J,a.searchTerm]);let K=async a=>{try{await H({type:"error",title:"Delete User",message:`Are you sure you want to delete ${a.name}?`,confirmText:"Delete",details:[{label:"Email",value:a.email},{label:"Role",value:a.role}],onConfirm:async()=>{try{let b=await y.api.delete(`/auth/admin/delete-user/${a._id}`);if(b.success)J(),z.toast.success("User deleted successfully");else throw Error(b.message||"Failed to delete user")}catch(a){throw console.error("API Error:",a),a}}})}catch(a){"cancelled"!==a&&(console.error("Error in confirmation:",a),z.toast.error(a.response?.data?.message||"Failed to delete user"))}},L=()=>{G(!1),E(null)},M=async a=>{let b=!!D,c=b?`/auth/admin/update-details/${D._id}`:"/auth/register";try{let d={name:a.name,email:a.email,role:a.role,...!b&&{password:a.password}},e=await y.api[b?"put":"post"](c,d);if(!e.success){let a=Array.isArray(e.message)?e.message.join(". "):e.message;throw Error(a)}z.toast.success(e.message||(b?"User updated successfully":"User created successfully")),J(),L()}catch(a){console.error(`Error ${b?"updating":"saving"} user:`,a),z.toast.error(a.response?.data?.message||a.message||"An error occurred")}},N=[{field:"user",headerName:"User",flex:1,minWidth:240,render:a=>(0,b.jsxs)(d.Box,{sx:{display:"flex",alignItems:"center",gap:2,py:1},children:[(0,b.jsx)(j.Avatar,{src:a.avatar,alt:a.name,sx:{width:40,height:40,bgcolor:"primary.main",color:"white",fontSize:"1rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center"},children:a.name?a.name.charAt(0).toUpperCase():"U"}),(0,b.jsxs)(d.Box,{children:[(0,b.jsx)(e.Typography,{variant:"subtitle2",sx:{fontWeight:500,color:"text.primary",lineHeight:1.3,textTransform:"capitalize"},children:a.name||"Unknown User"}),(0,b.jsxs)(e.Typography,{variant:"caption",sx:{display:"block",color:"text.secondary",fontSize:"0.7rem",lineHeight:1.3,mt:.25},children:["ID: ",a._id]})]})]})},{field:"email",headerName:"Email",flex:1,minWidth:200,render:a=>(0,b.jsx)(e.Typography,{variant:"body2",sx:{color:"text.primary",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",display:"inline-block",verticalAlign:"middle"},children:a.email})},{field:"role",headerName:"Role",width:100,headerAlign:"center",align:"center",render:a=>{let c=a.role?.toLowerCase()||"user",d={admin:{bg:"#1976d2",hover:"#1565c0"},user:{bg:"#4caf50",hover:"#388e3c"}},e=c.charAt(0).toUpperCase()+c.slice(1);return(0,b.jsx)(i.Chip,{label:e,size:"small",variant:"filled",sx:{fontWeight:500,minWidth:70,color:"white",backgroundColor:d[c].bg,"&:hover":{backgroundColor:d[c].hover},"& .MuiChip-label":{px:1.5,py:.5}}})}},{field:"createdAt",headerName:"Created At",width:120,render:a=>(0,b.jsxs)(d.Box,{children:[(0,b.jsx)(e.Typography,{variant:"body2",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"}),(0,b.jsx)(e.Typography,{variant:"caption",color:"text.secondary",children:a.updatedAt?`Updated: ${new Date(a.updatedAt).toLocaleDateString()}`:""})]})},{field:"actions",headerName:"Actions",width:120,align:"right",render:a=>(0,b.jsxs)(d.Box,{sx:{display:"flex",justifyContent:"flex-end",gap:1,pr:1},children:[(0,b.jsx)(o.Tooltip,{title:"Edit user",children:(0,b.jsx)(n.IconButton,{size:"small",onClick:()=>{E(a),G(!0)},sx:{"&:hover":{backgroundColor:"action.hover",color:"primary.main"}},children:(0,b.jsx)(s.default,{fontSize:"small"})})}),(0,b.jsx)(o.Tooltip,{title:"Delete user",children:(0,b.jsx)(n.IconButton,{size:"small",onClick:()=>K(a),sx:{"&:hover":{backgroundColor:"action.hover",color:"error.main"}},children:(0,b.jsx)(t.default,{fontSize:"small"})})})]})}];return(0,b.jsx)(x.default,{children:(0,b.jsxs)(d.Box,{sx:{p:3},children:[(0,b.jsxs)(d.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,background:`linear-gradient(45deg, ${B.default.palette.primary.main} 0%, ${B.default.palette.primary.dark} 100%)`,borderRadius:2,boxShadow:B.default.shadows[2],py:1.5,px:2,color:B.default.palette.common.white},children:[(0,b.jsxs)(e.Typography,{variant:"h4",component:"h1",sx:{fontWeight:500,textTransform:"uppercase",fontSize:24,letterSpacing:"0.09em",textShadow:"0 0 5px rgba(0, 0, 0, 0.1)"},children:["Users (",a?.totalRows,")"]}),(0,b.jsx)(f.Button,{variant:"contained",startIcon:(0,b.jsx)(q.default,{}),onClick:()=>{E(null),G(!0)},sx:{fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.5px",textTransform:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",background:`linear-gradient(45deg, ${B.default.palette.primary.main} 0%, #3cb815 100%)`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-2px)",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)","&::after":{transform:"translateX(0%)"}},"&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.1)",transform:"translateX(-100%)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},"& .MuiButton-startIcon":{transition:"transform 0.3s ease"},"&:hover .MuiButton-startIcon":{transform:"scale(1.1)"}},children:"Add User"})]}),(0,b.jsxs)(d.Box,{elevation:0,sx:{mb:3,p:2,borderRadius:2,border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:1}},children:[(0,b.jsx)(g.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Search users by name or email...",value:a.searchTerm,onChange:a=>{C(b=>({...b,searchTerm:a.target.value,page:0}))},disabled:a.loading,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"background.paper","&:hover fieldset":{borderColor:"primary.light"},"&.Mui-focused fieldset":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(25, 118, 210, 0.2)"}}},InputProps:{startAdornment:(0,b.jsx)(h.InputAdornment,{position:"start",children:(0,b.jsx)(r.default,{color:"action",sx:{color:"text.secondary",...a.loading&&{color:"primary.main"}}})}),endAdornment:a.loading&&(0,b.jsx)(h.InputAdornment,{position:"end",children:(0,b.jsx)(p.CircularProgress,{size:20,thickness:4})})},helperText:(0,b.jsx)(d.Box,{component:"span",sx:{display:"flex",alignItems:"center",color:a.searchTerm&&a.searchTerm.length<2?"text.secondary":"transparent",fontSize:"0.75rem",height:"1.2rem"},children:a.searchTerm&&a.searchTerm.length<2?"Type at least 2 characters to search":" "})}),(0,b.jsx)(w.DataTable,{rows:a.users,columns:N,loading:a.loading,page:a.page,rowsPerPage:a.rowsPerPage,totalRows:a.totalRows,onPageChange:(a,b)=>{C(a=>({...a,page:b}))},onRowsPerPageChange:a=>{C(b=>({...b,rowsPerPage:a,page:0}))},emptyMessage:"No users found"})]}),(0,b.jsxs)(k.Dialog,{open:F,onClose:L,maxWidth:"sm",fullWidth:!0,children:[(0,b.jsxs)(l.DialogTitle,{sx:{m:0,p:2.5,background:`linear-gradient(195deg, ${B.default.palette.primary.main}, ${B.default.palette.primary.dark})`,color:"white",display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiTypography-root":{fontWeight:600,letterSpacing:"0.5px"}},children:[(0,b.jsxs)(d.Box,{children:[(0,b.jsx)(e.Typography,{variant:"h6",component:"div",children:D?"Edit User":"Add New User"}),(0,b.jsx)(e.Typography,{variant:"caption",sx:{opacity:.8,display:"block",mt:.5},children:D?"Update the user details":"Fill in the details to add a new user"})]}),(0,b.jsx)(n.IconButton,{"aria-label":"close",onClick:L,sx:{position:"absolute",right:8,top:8,color:"common.white"},children:(0,b.jsx)(u.default,{})})]}),(0,b.jsx)(m.DialogContent,{dividers:!0,children:(0,b.jsx)(v.default,{fields:[{name:"name",label:"Full Name",type:"text",required:!0,gridProps:{size:{xs:12,sm:12,md:6}}},{name:"email",label:"Email",type:"email",required:!0,gridProps:{size:{xs:12,sm:12,md:6}}},...D?[]:[{name:"password",label:"Password",type:"password",required:!0,gridProps:{size:{xs:12,sm:12,md:6}}}],{name:"role",label:"Role",type:"select",options:[{value:"user",label:"User"},{value:"admin",label:"Admin"}],required:!0,gridProps:{size:{xs:12,sm:12,md:6}}}],initialValues:D||{name:"",email:"",role:"user",password:""},onSubmit:M,onCancel:L,submitText:D?"Update User":"Add User",validationSchema:{email:[{test:a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),message:"Please enter a valid email address"}],...!D&&{password:[{test:a=>a&&a.length>=6,message:"Password must be at least 6 characters long"}]}}})})]})]})})}a.s(["default",()=>C])}];

//# sourceMappingURL=_3969ae6a._.js.map