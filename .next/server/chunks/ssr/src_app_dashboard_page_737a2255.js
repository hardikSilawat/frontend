module.exports=[14857,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50481),e=a.i(88463),f=a.i(37739),g=a.i(25326),h=a.i(38844),i=a.i(13469),j=a.i(94377),k=a.i(19127),l=a.i(3180),m=a.i(35429),n=a.i(37136),o=a.i(93110),p=a.i(56068),q=a.i(69464);let r=(0,q.default)((0,b.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),s=(0,q.default)((0,b.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),t=(0,q.default)((0,b.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var u=a.i(782),v=a.i(3750),w=a.i(60433),x=a.i(13682),y=a.i(34539),z=a.i(28473),A=a.i(72934),B=a.i(20094),C=a.i(21226),D=a.i(21944),E=a.i(17110),F=a.i(9111),F=F,G=a.i(12218),H=a.i(89936),I=a.i(14174),J=a.i(16683),K=a.i(59656),L=a.i(5434),M=a.i(50944);let N=({level:a,completed:c,total:d,percentage:f})=>{let g=c===d&&d>0;return(0,b.jsx)(x.default,{title:`${c} out of ${d} ${a} problems completed (${f}%)`,arrow:!0,children:(0,b.jsx)(v.default,{icon:g?(0,b.jsx)(y.default,{fontSize:"small",sx:{color:"white"}}):null,label:(0,b.jsxs)(e.default,{component:"span",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:500},children:[a," ",c,"/",d,(0,b.jsxs)(e.default,{component:"span",sx:{opacity:.8,fontWeight:400},children:["(",f,"%)"]})]}),color:g?"success":"default",variant:"outlined",size:"small",sx:{backgroundColor:"white",borderColor:g?"success.main":"divider","&:hover":{backgroundColor:"action.hover"},"& .MuiChip-label":{px:1}}})})},O=(0,A.default)(async()=>{},{loadableGenerated:{modules:[27995]},ssr:!1});a.s(["default",0,function({window:a}){let[q,A]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)([]),T=(0,I.useSelector)(a=>a.user);console.log(T);let U=(0,I.useDispatch)(),V=(0,M.useRouter)(),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)({}),[$,_]=(0,c.useState)(!0),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)({easy:{completed:0,total:0,percentage:0},medium:{completed:0,total:0,percentage:0},tough:{completed:0,total:0,percentage:0},overall:{completed:0,total:0,percentage:0}}),[ae,af]=(0,c.useState)(null),ag=(0,c.useRef)(!1),ah=async()=>{try{let a=await z.default.get("/topics/all");S(a.data);let b={};a.data.forEach(a=>{b[a._id]=!1}),Z(b),ai(a.data)}catch(a){ab("Failed to fetch topics"),console.error(a)}finally{_(!1)}},ai=async()=>{try{let a=await z.default.get("/topics/progress");200===a.status&&ad(a.data)}catch(a){console.error("Error fetching progress:",a),B.toast.error("Failed to fetch progress")}};(0,c.useEffect)(()=>{ag.current||(ah(),ai(),ag.current=!0)},[ag]);let aj=async a=>{try{let b=await z.default.get(`/subtopics/${a}`),c={...b.data,isCompleted:!!b.data.isCompleted};X(c)}catch(a){console.error("Error fetching subtopic details:",a)}},ak=async(a,b)=>{try{W?._id===a&&X(a=>({...a,isCompleted:b}));let c=R.map(c=>({...c,subtopics:c.subtopics.map(c=>c._id===a?{...c,isCompleted:b}:c)}));S(c),await ai()}catch(a){console.error("Error toggling completion status:",a)}},al=(0,b.jsxs)(e.default,{children:[(0,b.jsx)(C.DrawerHeader,{children:(0,b.jsx)(e.default,{sx:{my:2,display:"flex",alignItems:"center",justifyContent:"center",width:"70%",height:"100%",textDecoration:"none"},children:(0,b.jsx)(p.default,{variant:"h6",sx:{color:"primary.contrastText"},children:"DSA Tracker"})})}),(0,b.jsx)(g.default,{}),(0,b.jsx)(j.default,{children:$?(0,b.jsx)(p.default,{children:"Loading..."}):aa?(0,b.jsx)(p.default,{color:"error",children:aa}):R.map(a=>{let c=a.subtopics.every(a=>a.isCompleted),d=a.subtopics.some(a=>a.isCompleted);return(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.default,{onClick:()=>{var b;return b=a._id,void Z(a=>({...a,[b]:!a[b]}))},children:[(0,b.jsx)(l.default,{children:c?(0,b.jsx)(y.default,{color:"success"}):d?(0,b.jsx)(y.default,{color:"action",sx:{opacity:.5}}):(0,b.jsx)(r,{})}),(0,b.jsx)(m.default,{primary:a.name,primaryTypographyProps:{color:c?"success.main":"inherit",fontWeight:c?"bold":"normal"}}),Y[a._id]?(0,b.jsx)(s,{}):(0,b.jsx)(t,{})]}),(0,b.jsx)(u.default,{in:Y[a._id],timeout:"auto",unmountOnExit:!0,children:(0,b.jsx)(j.default,{component:"div",disablePadding:!0,children:a.subtopics.map(a=>(0,b.jsxs)(k.default,{sx:{pl:4,backgroundColor:a._id===W?._id?"action.hover":"inherit","&:hover":{backgroundColor:"action.hover"}},onClick:()=>aj(a._id),children:[(0,b.jsx)(l.default,{sx:{minWidth:36},children:a.isCompleted?(0,b.jsx)(y.default,{color:"success",fontSize:"small"}):(0,b.jsx)("div",{style:{width:24,height:24}})}),(0,b.jsx)(m.default,{primary:(0,b.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.name,a.completed&&(0,b.jsx)(v.default,{label:"Completed",size:"small",color:"success",variant:"outlined",sx:{height:20,fontSize:"0.7rem","& .MuiChip-label":{px:.5}}})]}),primaryTypographyProps:{textDecoration:a.completed?"line-through":"none",color:a.completed?"text.secondary":"text.primary"}})]},a._id))})})]},a._id)})}),(0,b.jsx)(g.default,{sx:{mb:2}}),(0,b.jsxs)(w.default,{sx:{gap:2,p:2},children:[(0,b.jsx)(N,{level:"Easy",completed:ac.easy.completed,total:ac.easy.total,percentage:ac.easy.percentage}),(0,b.jsx)(N,{level:"Medium",completed:ac.medium.completed,total:ac.medium.total,percentage:ac.medium.percentage}),(0,b.jsx)(N,{level:"Tough",completed:ac.tough.completed,total:ac.tough.total,percentage:ac.tough.percentage}),(0,b.jsx)(N,{level:"Overall",completed:ac.overall.completed,total:ac.overall.total,percentage:ac.overall.percentage,sx:{borderWidth:2,borderColor:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.08)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.12)"}}})]})]}),am=async()=>{try{let{success:a,message:b}=await z.default.post("/auth/logout");a?(B.toast.success(b||"Successfully logged out"),L.default.remove("UserToken",{path:"/"}),U((0,H.setUser)(null)),V.push("/login")):B.toast.error(b||"Failed to logout")}catch(b){let a=b?.response?.message||b.message||"Error during logout";B.toast.error(a)}};return(0,b.jsxs)(e.default,{sx:{display:"flex"},children:[(0,b.jsx)(f.default,{}),(0,b.jsx)(d.default,{position:"fixed",sx:{width:{sm:"calc(100% - 240px)"},ml:{sm:"240px"}},children:(0,b.jsxs)(o.default,{children:[(0,b.jsx)(i.default,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{P||A(!q)},sx:{mr:2,display:{sm:"none"}},children:(0,b.jsx)(n.default,{})}),(0,b.jsxs)(w.default,{direction:"row",spacing:1,sx:{display:{xs:"none",md:"flex"},alignItems:"center",flexWrap:"wrap",gap:1},children:[(0,b.jsx)(N,{level:"Easy",completed:ac.easy.completed,total:ac.easy.total,percentage:ac.easy.percentage}),(0,b.jsx)(N,{level:"Medium",completed:ac.medium.completed,total:ac.medium.total,percentage:ac.medium.percentage}),(0,b.jsx)(N,{level:"Tough",completed:ac.tough.completed,total:ac.tough.total,percentage:ac.tough.percentage}),(0,b.jsx)(g.default,{orientation:"vertical",flexItem:!0,sx:{mx:.5,height:24,borderColor:"divider"}}),(0,b.jsx)(N,{level:"Overall",completed:ac.overall.completed,total:ac.overall.total,percentage:ac.overall.percentage})]}),(0,b.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",ml:"auto"},children:[(0,b.jsx)(x.default,{title:"Account settings",children:(0,b.jsx)(i.default,{onClick:a=>{af(a.currentTarget)},size:"small",sx:{ml:1,p:.5,border:`2px solid ${K.default.palette.divider}`,transition:"all 0.2s",backgroundColor:K.default.palette.primary.contrastText,"&:hover":{borderColor:K.default.palette.primary.dark,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${(0,D.alpha)(K.default.palette.primary.dark,.15)}`}},"aria-controls":ae?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":ae?"true":void 0,children:(0,b.jsx)(E.Avatar,{src:T?.avatar,alt:T?.name?.charAt(0)||"U",sx:{width:36,height:36,bgcolor:T?.avatar?"transparent":"primary.dark",color:T?.avatar?"inherit":"primary.contrastText",fontWeight:600,"&:hover":{transform:"scale(1.05)",borderColor:K.default.palette.primary.dark},transition:"transform 0.2s"},children:T?.name?.charAt(0)||"U"})})}),(0,b.jsxs)(F.default,{anchorEl:ae,id:"account-menu",open:!!ae,onClose:()=>af(null),onClick:()=>af(null),PaperProps:{elevation:3,sx:{overflow:"visible",mt:1.5,minWidth:200,borderRadius:2,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,b.jsxs)(G.MenuItem,{onClick:()=>af(null),children:[(0,b.jsx)(E.Avatar,{src:T?.avatar,alt:T?.name?.charAt(0)||"U",sx:{bgcolor:T?.avatar?"transparent":"primary.main",color:T?.avatar?"inherit":"white"},children:T?.name?.charAt(0)||"U"}),(0,b.jsxs)(e.default,{children:[(0,b.jsx)(p.default,{variant:"subtitle2",fontWeight:500,noWrap:!0,children:T?.name||"User"}),(0,b.jsx)(p.default,{variant:"caption",color:"text.secondary",noWrap:!0,children:T?.email||"user@example.com"})]})]}),(0,b.jsx)(g.default,{}),(0,b.jsxs)(G.MenuItem,{onClick:am,children:[(0,b.jsx)(l.default,{children:(0,b.jsx)(J.default,{fontSize:"small",color:"error"})}),(0,b.jsx)(p.default,{color:"error",children:"Logout"})]})]})]})]})}),(0,b.jsxs)(e.default,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,b.jsx)(h.default,{container:void 0!==a?()=>a().document.body:void 0,variant:"temporary",open:q,onTransitionEnd:()=>{Q(!1)},onClose:()=>{Q(!0),A(!1)},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},slotProps:{root:{keepMounted:!0}},children:al}),(0,b.jsx)(h.default,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:al})]}),(0,b.jsxs)(e.default,{component:"main",sx:{flexGrow:1,p:0,width:{sm:"calc(100% - 240px)"},height:"100vh",overflow:"auto"},children:[(0,b.jsx)(o.default,{}),(0,b.jsx)(O,{subtopic:W,onCompletionChange:ak})]})]})}],14857)}];

//# sourceMappingURL=src_app_dashboard_page_737a2255.js.map