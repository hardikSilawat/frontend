module.exports=[55981,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14174),e=a.i(3888),f=a.i(89936);let g=(0,e.configureStore)({reducer:f.rootReducer});var h=a.i(20094),i=a.i(5434),j=a.i(50944),k=a.i(28473);let l=c.createContext(null);function m(){return c.useContext(l)}let n="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",o=function(a){let{children:d,theme:e}=a,f=m(),g=c.useMemo(()=>{var a,b;let c=null===f?{...e}:(a=f,"function"==typeof(b=e)?b(a):{...a,...b});return null!=c&&(c[n]=null!==f),c},[e,f]);return(0,b.jsx)(l.Provider,{value:g,children:d})};var p=a.i(43299),q=a.i(56534),r=a.i(64719),s=a.i(3966),t=a.i(54661),u=a.i(24257),v=a.i(55613);let w={};function x(a,b,d,e=!1){return c.useMemo(()=>{let c=a&&b[a]||b;if("function"==typeof d){let f=d(c),g=a?{...b,[a]:f}:f;return e?()=>g:g}return a?{...b,[a]:d}:{...b,...d}},[a,b,d,e])}let y=function(a){let{children:c,theme:d,themeId:e}=a,f=(0,q.default)(w),g=m()||w,h=x(e,f,d),i=x(e,g,d,!0),j="rtl"===(e?h[e]:h).direction,k=function(a){let c=(0,q.default)(),d=(0,u.default)()||"",{modularCssLayers:e}=a,f="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return(f=e&&null===c?"string"==typeof e?e.replace(/mui(?!\.)/g,f):`@layer ${f};`:"",(0,t.default)(()=>{let a=document.querySelector("head");if(!a)return;let b=a.firstChild;if(f){if(b&&b.hasAttribute?.("data-mui-layer-order")&&b.getAttribute("data-mui-layer-order")===d)return;let c=document.createElement("style");c.setAttribute("data-mui-layer-order",d),c.textContent=f,a.prepend(c)}else a.querySelector(`style[data-mui-layer-order="${d}"]`)?.remove()},[f,d]),f)?(0,b.jsx)(v.default,{styles:f}):null}(h);return(0,b.jsx)(o,{theme:i,children:(0,b.jsx)(p.ThemeContext.Provider,{value:h,children:(0,b.jsx)(r.default,{value:j,children:(0,b.jsxs)(s.default,{value:e?h[e].components:h.components,children:[k,c]})})})})};var z=a.i(21945);function A({theme:a,...c}){let d=z.default in a?a[z.default]:void 0;return(0,b.jsx)(y,{...c,themeId:d?z.default:void 0,theme:d||a})}var B=a.i(65840),C=a.i(27160);let D="mode",E="color-scheme";function F(){}let G=({key:a,storageWindow:b})=>({get(a){},set:c=>{if(b)try{b.localStorage.setItem(a,c)}catch{}},subscribe:c=>{if(!b)return F;let d=b=>{let d=b.newValue;b.key===a&&c(d)};return b.addEventListener("storage",d),()=>{b.removeEventListener("storage",d)}}});function H(){}function I(a){}function J(a,b){return"light"===a.mode||"system"===a.mode&&"light"===a.systemMode?b("light"):"dark"===a.mode||"system"===a.mode&&"dark"===a.systemMode?b("dark"):void 0}var K=a.i(78776),L=a.i(15721);let{CssVarsProvider:M,useColorScheme:N,getInitColorSchemeScript:O}=function(a){let{themeId:d,theme:e={},modeStorageKey:f=D,colorSchemeStorageKey:g=E,disableTransitionOnChange:h=!1,defaultColorScheme:i,resolveTheme:j}=a,k={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},l=c.createContext(void 0),n={},o={},p="string"==typeof i?i:i.light,q="string"==typeof i?i:i.dark;return{CssVarsProvider:function(a){let{children:k,theme:p,modeStorageKey:q=f,colorSchemeStorageKey:r=g,disableTransitionOnChange:s=h,storageManager:u,storageWindow:v,documentNode:w="undefined"==typeof document?void 0:document,colorSchemeNode:x="undefined"==typeof document?void 0:document.documentElement,disableNestedContext:z=!1,disableStyleSheetGeneration:A=!1,defaultMode:B="system",forceThemeRerender:F=!1,noSsr:K}=a,L=c.useRef(!1),M=m(),N=c.useContext(l),O=!!N&&!z,P=c.useMemo(()=>p||("function"==typeof e?e():e),[p]),Q=P[d],R=Q||P,{colorSchemes:S=n,components:T=o,cssVarPrefix:U}=R,V=Object.keys(S).filter(a=>!!S[a]).join(","),W=c.useMemo(()=>V.split(","),[V]),X="string"==typeof i?i:i.light,Y="string"==typeof i?i:i.dark,Z=S[X]&&S[Y]?B:S[R.defaultColorScheme]?.palette?.mode||R.palette?.mode,{mode:$,setMode:_,systemMode:aa,lightColorScheme:ab,darkColorScheme:ac,colorScheme:ad,setColorScheme:ae}=function(a){let{defaultMode:b="light",defaultLightColorScheme:d,defaultDarkColorScheme:e,supportedColorSchemes:f=[],modeStorageKey:g=D,colorSchemeStorageKey:h=E,storageWindow:i,storageManager:j=G,noSsr:k=!1}=a,l=f.join(","),m=f.length>1,n=c.useMemo(()=>j?.({key:g,storageWindow:i}),[j,g,i]),o=c.useMemo(()=>j?.({key:`${h}-light`,storageWindow:i}),[j,h,i]),p=c.useMemo(()=>j?.({key:`${h}-dark`,storageWindow:i}),[j,h,i]),[q,r]=c.useState(()=>{let a=n?.get(b)||b,c=o?.get(d)||d,f=p?.get(e)||e;return{mode:a,systemMode:I(a),lightColorScheme:c,darkColorScheme:f}}),[s,t]=c.useState(k||!m);c.useEffect(()=>{t(!0)},[]);let u=J(q,a=>"light"===a?q.lightColorScheme:"dark"===a?q.darkColorScheme:void 0),v=c.useCallback(a=>{r(c=>{if(a===c.mode)return c;let d=a??b;return n?.set(d),{...c,mode:d,systemMode:I(d)}})},[n,b]),w=c.useCallback(a=>{a?"string"==typeof a?a&&!l.includes(a)?console.error(`\`${a}\` does not exist in \`theme.colorSchemes\`.`):r(b=>{let c={...b};return J(b,b=>{"light"===b&&(o?.set(a),c.lightColorScheme=a),"dark"===b&&(p?.set(a),c.darkColorScheme=a)}),c}):r(b=>{let c={...b},f=null===a.light?d:a.light,g=null===a.dark?e:a.dark;return f&&(l.includes(f)?(c.lightColorScheme=f,o?.set(f)):console.error(`\`${f}\` does not exist in \`theme.colorSchemes\`.`)),g&&(l.includes(g)?(c.darkColorScheme=g,p?.set(g)):console.error(`\`${g}\` does not exist in \`theme.colorSchemes\`.`)),c}):r(a=>(o?.set(d),p?.set(e),{...a,lightColorScheme:d,darkColorScheme:e}))},[l,o,p,d,e]),x=c.useCallback(a=>{"system"===q.mode&&r(b=>{let c=a?.matches?"dark":"light";return b.systemMode===c?b:{...b,systemMode:c}})},[q.mode]),y=c.useRef(x);return y.current=x,c.useEffect(()=>{if("function"!=typeof window.matchMedia||!m)return;let a=(...a)=>y.current(...a),b=window.matchMedia("(prefers-color-scheme: dark)");return b.addListener(a),a(b),()=>{b.removeListener(a)}},[m]),c.useEffect(()=>{if(m){let a=n?.subscribe(a=>{(!a||["light","dark","system"].includes(a))&&v(a||b)})||H,c=o?.subscribe(a=>{(!a||l.match(a))&&w({light:a})})||H,d=p?.subscribe(a=>{(!a||l.match(a))&&w({dark:a})})||H;return()=>{a(),c(),d()}}},[w,v,l,b,i,m,n,o,p]),{...q,mode:s?q.mode:void 0,systemMode:s?q.systemMode:void 0,colorScheme:s?u:void 0,setMode:v,setColorScheme:w}}({supportedColorSchemes:W,defaultLightColorScheme:X,defaultDarkColorScheme:Y,modeStorageKey:q,colorSchemeStorageKey:r,defaultMode:Z,storageManager:u,storageWindow:v,noSsr:K}),af=$,ag=ad;O&&(af=N.mode,ag=N.colorScheme);let ah=ag||R.defaultColorScheme;R.vars&&!F&&(ah=R.defaultColorScheme);let ai=c.useMemo(()=>{let a=R.generateThemeVars?.()||R.vars,b={...R,components:T,colorSchemes:S,cssVarPrefix:U,vars:a};if("function"==typeof b.generateSpacing&&(b.spacing=b.generateSpacing()),ah){let a=S[ah];a&&"object"==typeof a&&Object.keys(a).forEach(c=>{a[c]&&"object"==typeof a[c]?b[c]={...b[c],...a[c]}:b[c]=a[c]})}return j?j(b):b},[R,ah,T,S,U]),aj=R.colorSchemeSelector;(0,t.default)(()=>{if(ag&&x&&aj&&"media"!==aj){let a=aj;if("class"===aj&&(a=".%s"),"data"===aj&&(a="[data-%s]"),aj?.startsWith("data-")&&!aj.includes("%s")&&(a=`[${aj}="%s"]`),a.startsWith("."))x.classList.remove(...W.map(b=>a.substring(1).replace("%s",b))),x.classList.add(a.substring(1).replace("%s",ag));else{let b=a.replace("%s",ag).match(/\[([^\]]+)\]/);if(b){let[a,c]=b[1].split("=");c||W.forEach(b=>{x.removeAttribute(a.replace(ag,b))}),x.setAttribute(a,c?c.replace(/"|'/g,""):"")}else x.setAttribute(a,ag)}}},[ag,aj,x,W]),c.useEffect(()=>{let a;if(s&&L.current&&w){let b=w.createElement("style");b.appendChild(w.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),w.head.appendChild(b),window.getComputedStyle(w.body),a=setTimeout(()=>{w.head.removeChild(b)},1)}return()=>{clearTimeout(a)}},[ag,s,w]),c.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]);let ak=c.useMemo(()=>({allColorSchemes:W,colorScheme:ag,darkColorScheme:ac,lightColorScheme:ab,mode:af,setColorScheme:ae,setMode:_,systemMode:aa}),[W,ag,ac,ab,af,ae,_,aa,ai.colorSchemeSelector]),al=!0;(A||!1===R.cssVariables||O&&M?.cssVarPrefix===U)&&(al=!1);let am=(0,b.jsxs)(c.Fragment,{children:[(0,b.jsx)(y,{themeId:Q?d:void 0,theme:ai,children:k}),al&&(0,b.jsx)(C.GlobalStyles,{styles:ai.generateStyleSheets?.()||[]})]});return O?am:(0,b.jsx)(l.Provider,{value:ak,children:am})},useColorScheme:()=>c.useContext(l)||k,getInitColorSchemeScript:a=>(function(a){let{defaultMode:c="system",defaultLightColorScheme:d="light",defaultDarkColorScheme:e="dark",modeStorageKey:f=D,colorSchemeStorageKey:g=E,attribute:h="data-color-scheme",colorSchemeNode:i="document.documentElement",nonce:j}=a||{},k="",l=h;if("class"===h&&(l=".%s"),"data"===h&&(l="[data-%s]"),l.startsWith(".")){let a=l.substring(1);k+=`${i}.classList.remove('${a}'.replace('%s', light), '${a}'.replace('%s', dark));
      ${i}.classList.add('${a}'.replace('%s', colorScheme));`}let m=l.match(/\[([^[\]]+)\]/);if(m){let[a,b]=m[1].split("=");b||(k+=`${i}.removeAttribute('${a}'.replace('%s', light));
      ${i}.removeAttribute('${a}'.replace('%s', dark));`),k+=`
      ${i}.setAttribute('${a}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else k+=`${i}.setAttribute('${l}', colorScheme);`;return(0,b.jsx)("script",{suppressHydrationWarning:!0,nonce:j,dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${f}') || '${c}';
  const dark = localStorage.getItem('${g}-dark') || '${e}';
  const light = localStorage.getItem('${g}-light') || '${d}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${k}
  }
} catch(e){}})();`}},"mui-color-scheme-init")})({colorSchemeStorageKey:g,defaultLightColorScheme:p,defaultDarkColorScheme:q,modeStorageKey:f,...a})}}({themeId:z.default,theme:()=>(0,K.default)({cssVariables:!0}),colorSchemeStorageKey:"mui-color-scheme",modeStorageKey:"mui-mode",defaultColorScheme:{light:"light",dark:"dark"},resolveTheme:a=>{let b={...a,typography:(0,L.default)(a.palette,a.typography)};return b.unstable_sx=function(a){return(0,B.default)({sx:a,theme:this})},b}});function P({theme:a,...d}){let e=c.useMemo(()=>{if("function"==typeof a)return a;let b=z.default in a?a[z.default]:a;return"colorSchemes"in b?null:"vars"in b?a:{...a,vars:null}},[a]);return e?(0,b.jsx)(A,{theme:e,...d}):(0,b.jsx)(M,{theme:a,...d})}var Q=a.i(59656),R=a.i(67550),S=a.i(35926);let T=()=>{let a=(0,S.useTheme)(),d=(0,R.useMediaQuery)("(max-width:500px)"),e=(0,c.useRef)(null);return(0,c.useEffect)(()=>{},[a]),(0,b.jsx)("div",{ref:e,children:(0,b.jsx)(h.ToastContainer,{position:"top-center",autoClose:3e3,limit:1,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!1,theme:"colored",transition:h.Bounce,style:{width:d?"90%":"auto",left:d?"5%":"50%",top:"10px",transform:d?"none":"translateX(-50%)",zIndex:99999}})})};var U=a.i(40646);let V=["/login"],W=["/dashboard"];function X({children:a}){let b=(0,j.useRouter)(),d=(0,j.usePathname)(),[e,f]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{f(!0)},[]),(0,c.useEffect)(()=>{if(!e)return;let a=i.default.get("UserToken"),c=i.default.get("AdminToken");if(d.startsWith("/admin"))return void(c?"/admin/login"===d&&b.replace("/admin/dashboard"):d.startsWith("/admin/login")||b.replace("/admin/login"));if("/"===d)return void(c?b.replace("/admin/dashboard"):a?b.replace("/dashboard"):b.replace("/login"));let f=W.some(a=>d.startsWith(a)),g=V.some(a=>d.startsWith(a));if(f){if(c)return void b.replace("/admin/dashboard");if(!a)return void b.replace("/login")}if(g){if(c)return void b.replace("/admin/dashboard");if(a)return void b.replace("/dashboard")}},[e,d,b]),e?a:null}function Y({children:a}){return(0,b.jsx)(d.Provider,{store:g,children:(0,b.jsxs)(P,{theme:Q.default,children:[(0,b.jsx)(T,{}),(0,b.jsx)(U.ConfirmProvider,{children:(0,b.jsx)(X,{children:(0,b.jsx)(Z,{children:a})})})]})})}function Z({children:a}){let e=(0,d.useDispatch)(),g=(0,j.useRouter)(),l=(0,j.usePathname)(),m=(0,c.useRef)(!1),n=(0,c.useCallback)((a,b)=>{let c=window.location.pathname;i.default.remove(b,{path:"/"}),a?(e((0,f.setAdmin)(null)),c.startsWith("/admin/login")||g.push("/admin/login")):(e((0,f.setUser)(null)),c.startsWith("/login")||g.push("/login")),h.toast.error("Your session has expired. Please log in again.")},[e,g]),o=(0,c.useCallback)(async()=>{let a=l?.startsWith("/admin"),b=a?"AdminToken":"UserToken",c=i.default.get(b),d=new URLSearchParams(window.location.search).get("token");if(d){c=d;let a=new URL(window.location.href);a.searchParams.delete("token"),window.history.replaceState({},document.title,a.toString())}if(!c)return void(a?e((0,f.setAdmin)(null)):e((0,f.setUser)(null)));try{let d=await k.api.get("/auth/me");d?.success?(i.default.set(b,c,{expires:36500,path:"/",secure:!0,sameSite:"strict"}),a?(e((0,f.setAdmin)(d.data)),"/admin/login"===l&&g.push("/admin/dashboard")):(e((0,f.setUser)(d.data)),"/login"===l&&g.push("/dashboard"))):n(a,b)}catch(c){console.error("Auth check failed:",c),n(a,b)}},[e,g,l,n]);return(0,c.useEffect)(()=>{if(!m.current){m.current=!0,o();let a=setInterval(o,3e5);return()=>{clearInterval(a)}}},[o]),(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>Y],55981)}];

//# sourceMappingURL=src_providers_ClientProviders_92e3a9ee.js.map